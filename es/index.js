var t={isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)},eleInArr:function(t,e,r){try{for(var n=0;n<t.length;n++)if(t[n][e]==r)return n;return-1}catch(t){return-1}},eleInArrByKeys:function(t,e,r){var n=[];try{for(var a=0;a<t.length;a++){for(var o in r)t[a][e]==r[o]&&(n.push(t[a]),r.splice(o,1));if(0==r.length)return n}return n}catch(t){return n}},valInArr:function(t,e){for(var r=0;r<t.length;r++)if(t[r]==e)return r;return-1},uniqueArr:function(t){for(var e=[],r={},n=0;n<t.length;n++)r[t[n]]||(e.push(t[n]),r[t[n]]=1);return e},uniqueArrJson:function(t,e){var r=[],n={};return t.forEach((function(t,a){n[t[e]]||(r.push(t),n[t[e]]=1)})),r},compareVersion:function(t,e){if(t&&e){for(var r=t.split("."),n=e.split("."),a=0;a<n.length;a++){if(n[a]>r[a])return 1;if(n[a]<r[a])return-1}return 0}return 0}},e={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",91:"国外"},r={sexMap:{0:"女",1:"男"},checkIdCard:function(t){var r=0;if(!/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/.test(t))return{status:!1,message:"你输入的身份证长度或格式错误!"};if(t=t.replace(/x$/i,"a"),null==e[parseInt(t.substr(0,2))])return{status:!1,message:"你的身份证地区非法!"};if(18==t.length){var n=t.substr(6,4)+"-"+Number(t.substr(10,2))+"-"+Number(t.substr(12,2)),a=new Date(n.replace(/-/g,"/"));if(n!=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate())return{status:!1,message:"身份证上的出生日期非法!"};for(var o=17;o>=0;o--)r+=Math.pow(2,o)%11*parseInt(t.charAt(17-o),11);if(r%11!=1)return{status:!1,message:"你输入的身份证号非法!"}}if(15==t.length){var u=t.substring(6,8),s=t.substring(8,10),i=t.substring(10,12),c=new Date(u,parseFloat(s)-1,parseFloat(i));if(c.getYear()!=parseFloat(u)||c.getMonth()!=parseFloat(s)-1||c.getDate()!=parseFloat(i))return{status:!1,message:"身份证上的出生日期非法!"}}return{status:!0,message:"校验成功！"}},getIDInfoByIdCard:function(t){var e=this;return{sex:e.getSexByIdCard(t),birth:e.getBirthdayByIdCard(t),area:e.getAreaByIdCard(t),age:e.getAgeByIdCard(t)}},getSexByIdCard:function(t){return 15==t.length?this.sexMap[t.substring(14,15)%2]:18==t.length?this.sexMap[t.substring(14,17)%2]:""},getBirthdayByIdCard:function(t){var e;return 15==t.length?(e=t.charAt(6)+t.charAt(7),e=(e=parseInt(e)<10?"20"+e:"19"+e)+"-"+t.charAt(8)+t.charAt(9)+"-"+t.charAt(10)+t.charAt(11)):18==t.length&&(e=t.charAt(6)+t.charAt(7)+t.charAt(8)+t.charAt(9)+"-"+t.charAt(10)+t.charAt(11)+"-"+t.charAt(12)+t.charAt(13)),e},getAreaByIdCard:function(t){return e[parseInt(t.substr(0,2))]},getAgeByIdCard:function(t){var e=this.getBirthdayByIdCard(t).match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/);if(null==e)return"";var r=new Date(e[1],e[3]-1,e[4]);return r.getFullYear()==e[1]&&r.getMonth()+1==e[3]&&r.getDate()==e[4]?(new Date).getFullYear()-e[1]:""},checkPhoneNum:function(t){return/^1[0-9]\d{9}$/.test(t)?{status:!0,message:"校验成功"}:{status:!1,message:"手机号码不合法"}}},n={parents:function(t,e){void 0===e&&(e=document);for(var r=[],n=t.parentNode;n&&n!==e;){var a=n;r.push(a),n=a.parentNode}return r.push(e),r},querySelector:function(t,e){var r=[];if(!t||!t.length)return r;if(!e||!e.length)return r;for(var n=e.substr(0,1),a=0;a<t.length;a++)"."==n&&t[a].className==e.substr(1,e.length-1)&&r.push(t[a]),"#"==n&&t[a].id==e.substr(1,e.length-1)&&r.push(t[a]);return r},isExistImage:function(t){return new Promise((function(e){var r=new Image;r.onload=function(){1==this.complete&&(e(!0),r=null)},r.onerror=function(){e(!1),r=null},r.src=t}))}},a={formatTimesFromTime:function(t){var e=t.split(":");return new Date("","","",e[0],e[1],e[2]).getTime()},addDate:function(t,e){var r=new Date(t.replace(/\-/g,"/"));r.setDate(r.getDate()+e);var n=r.getMonth()+1,a=r.getDate(),o=r.getHours(),u=r.getMinutes(),s=r.getSeconds();return n>=1&&n<=9&&(n="0"+n),a>=0&&a<=9&&(a="0"+a),o>=0&&o<=9&&(o="0"+o),u>=0&&u<=9&&(u="0"+u),s>=0&&s<=9&&(s="0"+s),r.getFullYear()+"-"+n+"-"+a+" "+o+":"+u+":"+s},addHours:function(t,e){var r=new Date(t.replace(/\-/g,"/"));r.setHours(r.getHours()+e);var n=r.getMonth()+1,a=r.getDate(),o=r.getHours(),u=r.getMinutes(),s=r.getSeconds();return n>=1&&n<=9&&(n="0"+n),a>=0&&a<=9&&(a="0"+a),o>=0&&o<=9&&(o="0"+o),u>=0&&u<=9&&(u="0"+u),s>=0&&s<=9&&(s="0"+s),r.getFullYear()+"-"+n+"-"+a+" "+o+":"+u+":"+s},minusDate:function(t,e){var r=new Date(t.replace(/\-/g,"/"));r.setDate(r.getDate()-e);var n=r.getMonth()+1,a=r.getDate(),o=r.getHours(),u=r.getMinutes(),s=r.getSeconds();return n>=1&&n<=9&&(n="0"+n),a>=0&&a<=9&&(a="0"+a),o>=0&&o<=9&&(o="0"+o),u>=0&&u<=9&&(u="0"+u),s>=0&&s<=9&&(s="0"+s),r.getFullYear()+"-"+n+"-"+a+" "+o+":"+u+":"+s},formatTimesFromDateTime:function(t){return new Date(Date.parse(t.replace(/-/g,"/"))).getTime()},getDateTimeFromStamp:function(t){var e=new Date(t);return a.getFormatDate(e)},getDateTimeFromStampCurrect:function(t){var e=new Date(t);return a.formatDate(e)},formatDate:function(t){var e=t.getMonth()+1,r=t.getDate(),n=t.getHours(),a=t.getMinutes(),o=t.getSeconds();return e>=1&&e<=9&&(e="0"+e),r>=0&&r<=9&&(r="0"+r),n>=0&&n<=9&&(n="0"+n),a>=0&&a<=9&&(a="0"+a),o>=0&&o<=9&&(o="0"+o),t.getFullYear()+"-"+e+"-"+r+" "+n+":"+a+":"+o},getFormatTime:function(){var t=new Date,e=t.getHours(),r=t.getMinutes(),n=t.getSeconds();return e>=0&&e<=9&&(e="0"+e),r>=0&&r<=9&&(r="0"+r),n>=0&&n<=9&&(n="0"+n),e+":"+r+":"+n},getTheDate:function(){try{return a.getFormatDate().split(" ")[0]}catch(t){return""}},getFormatDate:function(){var t=new Date;return a.formatDate(t)},checkDateFormat:function(t){try{var e=t.match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/);if(null==e)return!1;var r=new Date(e[1],e[3]-1,e[4]);return r.getFullYear()==e[1]&&r.getMonth()+1==e[3]&&r.getDate()==e[4]}catch(t){return!1}},checkTimeFormat:function(t){try{return!!/^(?:(?:[0-2][0-3])|(?:[0-1][0-9])):[0-5][0-9]:[0-5][0-9]$/.test(t)}catch(t){return!1}},checkDateTimeFormat:function(t){try{var e=t.split(" ");return!(!a.checkDateFormat(e[0])||!a.checkTimeFormat(e[1]))}catch(t){return!1}},getDatebySeconds:function(t,e){var r=new Date(Date.parse(t.replace(/-/g,"/")));return r.setSeconds(r.getSeconds()+e),a.formatDate(r)},getDatebyMinutes:function(t,e){var r=new Date(Date.parse(t.replace(/-/g,"/")));return r.setMinutes(r.getMinutes()+e),a.formatDate(r)},getDatebyDays:function(t,e){var r=new Date(Date.parse(t.replace(/-/g,"/")));return r.setDate(r.getDate()+e),a.formatDate(r)},getDatebyMonths:function(t,e){var r=new Date(Date.parse(t.replace(/-/g,"/")));return r.setMonth(r.getMonth()+e),a.formatDate(r)},getDatebyYears:function(t,e){var r=new Date(Date.parse(t.replace(/-/g,"/")));return r.setFullYear(r.getFullYear()+e),a.formatDate(r)},getFirstDayAndLastDay:function(t){var e=new Date(t).setDate(1),r=a.formatDate(new Date(e));return{firstDay:r,lastDay:a.getDatebyDays(a.getDatebyMonths(r,1),-1)}},calculateDuration:function(t,e){try{var r=function(t,e,r){var n="00",a="00",o="00";return t>0&&(n=t<10?"0"+t:t),e>0&&(a=e<10?"0"+e:e),r>0&&(o=r<10?"0"+r:r),n+"时"+a+"分"+o+"秒"},n=parseInt(t.split("时")[0],10),a=parseInt(t.split("时")[1].split("分")[0],10),o=parseInt(t.split("时")[1].split("分")[1].substring(0,2),10);if(o+e>=60){var u=(o+e)%60,s=a+(o+e-u)/60;if(s>60){var i=s%60;return r(n+(s-i)/60,i,u)}return r(n,s,u)}return r(n,a,o+e)}catch(t){return"00时00分00秒"}},durationToMinutes:function(t){try{return 60*(parseInt(t.split("时")[0])||0)*60+60*(parseInt(t.split("时")[1].split("分")[0])||0)+(parseInt(t.split("时")[1].split("分")[1].substring(0,2))||0)}catch(t){return 0}},secondsToDuration:function(t){try{var e=t%60,r=e<10?"0"+e:e;if(e!=t){var n=(t-e)/60,a=n>60?n%60:n,o=a<10?"0"+a:a;if(a!=n){var u=(n-a)/60;return(u<10?"0"+u:u)+":"+o+":"+r}return"00:"+o+":"+r}return"00:00:"+r}catch(t){return""}},getFormatCAPDate:function(){var t=new Date,e=t.getFullYear(),r=t.getMonth()+1,n=t.getDate();return r>=1&&r<=9&&(r="0"+r),n>=0&&n<=9&&(n="0"+n),e+"年"+r+"月"+n+"日"},formatCAPDate:function(t,e){!t&&(t=new Date);var r=t.getFullYear(),n=t.getMonth()+1,a=t.getDate();return n>=1&&n<=9&&(n="0"+n),a>=0&&a<=9&&(a="0"+a),"月"==e?r+"年"+n+"月":r+"年"+n+"月"+a+"日"},getFormatLOWDate:function(){var t=new Date,e=t.getFullYear(),r=t.getMonth()+1,n=t.getDate();return r>=1&&r<=9&&(r="0"+r),n>=0&&n<=9&&(n="0"+n),e+"-"+r+"-"+n},getFormatSLADate:function(){var t=new Date,e=t.getFullYear(),r=t.getMonth()+1,n=t.getDate();return r>=1&&r<=9&&(r="0"+r),n>=0&&n<=9&&(n="0"+n),n+"/"+r+"/"+e},getFormatFullDate:function(){var t=new Date,e=t.getFullYear(),r=t.getMonth()+1,n=t.getDate(),a=t.getHours(),o=t.getMinutes(),u=t.getSeconds();return r>=1&&r<=9&&(r="0"+r),n>=0&&n<=9&&(n="0"+n),a>=0&&a<=9&&(a="0"+a),o>=0&&o<=9&&(o="0"+o),u>=0&&u<=9&&(u="0"+u),e+"年"+r+"月"+n+"日 "+a+"时"+o+"分"+u+"秒"},getFormatUSADate:function(){var t=new Date,e=t.getFullYear(),r=t.getMonth(),n=t.getDate();return n>=0&&n<=9&&(n="0"+n),["January","February","March","April","May","June","July","August","September","October","November","December"][r]+" "+n+","+e},getFormatUKDate:function(){var t=new Date,e=t.getFullYear(),r=t.getMonth(),n=t.getDate();return n>=0&&n<=9&&(n="0"+n),n+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][r]+","+e},ZNToNum:function(t){var e=t.split("年"),r=e[1].split("月"),n=r[1].split("日");return e[0]+"-"+(r[0]<9?"0"+r[0]:r[0])+"-"+(n[0]<9?"0"+n[0]:n[0])},timeInterval:function(t,e){var r=Date.parse(t.replace(/-/g,"/")),n=Date.parse(e.replace(/-/g,"/")),a=Math.abs(parseFloat(r)-parseFloat(n)+1e3),o=r-n>0?"-":"+",u=Math.floor(a/864e5),s=a%864e5,i=Math.floor(s/36e5),c=s%36e5,g=Math.floor(c/6e4);return{days:u,hours:i,minutes:g,seconds:Math.floor((a-24*u*60*60*1e3-60*i*60*1e3-60*g*1e3)/1e3),usedTime:a,flag:o}},dateStrToDate:function(t){try{return t.replace("年","-").replace("月","-").replace("日","")}catch(t){return""}},formatDateNoZero:function(t){var e=new Date(a.dateStrToDate(t));try{return e.getFullYear()+"年"+e.getMonth()+"1月"+e.getDate()}catch(t){return""}},dateToDATE:function(t){var e="〇一二三四五六七八九十";if(null===t.slice(0,10).match(/\d/g))return t;try{var r=t.split("年")[0],n=parseInt(t.split("年")[1].split("月")[0]),a=parseInt(t.split("年")[1].split("月")[1].split("日")[0]),o=e.charAt(parseInt(r.charAt(0)))+e.charAt(parseInt(r.charAt(1)))+e.charAt(parseInt(r.charAt(2)))+e.charAt(parseInt(r.charAt(3))),u=n<=10?e.charAt(n):"十"+e.charAt(parseInt(n.toString().charAt(1))),s=a<=10?e.charAt(a):a<20?"十"+e.charAt(parseInt(a.toString().charAt(1))):e.charAt(parseInt(a.toString().charAt(0)))+"十"+e.charAt(parseInt(a.toString().charAt(1)));return a%10==0&&a>10&&(s=e[a/10]+"十"),o+"年"+u+"月"+s+"日"}catch(t){return""}},formatByFmt:function(t,e){if(0==arguments.length)return"";var r=e||"yy-MM-dd",n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var a in/(y+)/.test(r)&&(r=r.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+a+")").test(r)&&(r=r.replace(RegExp.$1,1==RegExp.$1.length?n[a]:("00"+n[a]).substr((""+n[a]).length)));return r},formatDateTimeToObj:function(t){try{var e={},r=t.split(" ")[0],n=t.split(" ")[1];return e.year=r.split("-")[0],e.month=r.split("-")[1],e.day=r.split("-")[2],e.hour=n.split(":")[0],e.minute=n.split(":")[1],e.second=n.split(":")[2],e}catch(t){return{year:"",month:"",day:"",hour:"",minute:"",second:""}}},formatWeekDay:function(t){switch(Number(t)){case 0:return"日";case 1:return"一";case 2:return"二";case 3:return"三";case 4:return"四";case 5:return"五";case 6:return"六"}},newZNToNum:function(t){if(!t.dateStr)return"";if(t.dateStr.substr(t.dateStr.length-1,1)!=t.splitMap[t.splitMap.length-1])return t.dateStr;for(var e={},r="",n=0,a=0,o=t.splitMap.length;a<o;a++)a?(e[a]=e[a-1][1].split(t.splitMap[a]),r+=t.joinSign[n++],r+=(e[a][0]+"").length<2?"0"+e[a][0]:e[a][0]):(e[a]=t.dateStr.split(t.splitMap[a]),r+=e[a][0]);if(n<t.joinSign.length)for(;n<t.joinSign.length;n++)r+=t.joinSign[n],r+="00";return r}},o={openIndexedDB:function(t,e){return new Promise((function(r,n){var a=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.msIndexedDB;a||n("当前浏览器不支持indexedDB数据存储！");var o=a.open(t,e);o.onerror=function(t){n(t.currentTarget.error.message)},o.onsuccess=function(t){var e=t.target.result;r({db:e,type:"onsuccess"})},o.onupgradeneeded=function(t){var e=t.target.result;r({db:e,type:"onupgradeneeded"})},o.blocked=function(t){n("数据库连接未关闭！")}}))},createObjectStore:function(t,e,r,n){if(!t.objectStoreNames.contains(e))return t.createObjectStore(e,{keyPath:r,autoIncrement:n||!1})},createIndex:function(t,e,r,n){t.createIndex(e,r,n||{})},insert:function(t,e,r,n){return new Promise((function(a,o){if(n)n.transaction.oncomplete=function(){var n=t.transaction(e,"readwrite").objectStore(e).add(r);n.onsuccess=function(t){a(t.target.result)},n.onerror=function(t){o(t.target.error)}};else{var u=t.transaction(e,"readwrite").objectStore(e).add(r);u.onsuccess=function(t){a(t.target.result)},u.onerror=function(t){o(t.target.error)}}}))},searchByIndex:function(t,e,r,n){return new Promise((function(a,o){var u=t.transaction(e).objectStore(e).index(r).get(n);u.onsuccess=function(t){t.target.result?a(t.target.result):o("未获得数据记录！")},u.onerror=function(t){o(t.target.error)}}))},searchById:function(t,e,r){return new Promise((function(n,a){var o=t.transaction(e).objectStore(e).get(r);o.onsuccess=function(t){t.target.result?n(t.target.result):a("未获得数据记录！")},o.onerror=function(t){a(t.target.error)}}))},searchAll:function(t,e){return new Promise((function(r,n){var a=t.transaction(e).objectStore(e).openCursor(),o=[];a.onsuccess=function(t){var e=t.target.result;e?(o.push(e.value||{}),e.continue()):r(o)},a.onerror=function(t){n(t.target.error)}}))},update:function(t,e,r){return new Promise((function(n,a){var o=t.transaction(e,"readwrite").objectStore(e).put(r);o.onsuccess=function(t){n("数据更新成功!")},o.onerror=function(t){a(t.target.error)}}))},deleteById:function(t,e,r){return new Promise((function(n,a){var o=t.transaction(e,"readwrite").objectStore(e).delete(r);o.onsuccess=function(t){n("数据删除成功！")},o.onerror=function(t){a(t.target.error)}}))},searchAllByIndex:function(t,e,r,n){var a=window.IDBKeyRange||window.webkitIDBKeyRange||window.mozIDBKeyRange||window.msIDBKeyRange;return new Promise((function(o,u){var s=t.transaction(e,"readwrite").objectStore(e).index(r).openCursor(a.only(n)),i=[];s.onsuccess=function(t){var e=t.target.result;e?(i.push(e.value||{}),e.continue()):o(i)},s.onerror=function(t){u(t.target.error)}}))}};export{t as dataUtil,a as dateUtil,n as dom,o as indexdbUtil,r as validUtil};
